---
title: "Cyclist Case Study - New Marketing Strategy to convert casual riders into annual members"
author: "Piyusha Gunjan"
date: "`r Sys.Date()`"
output: html_document
---

# [Cyclist Casual/Member Full Year Analysis]{.underline}

```{r,echo=FALSE}
library(tidyverse) #helps wrangle data
library(janitor)   #helps data cleaning
library(ggplot2)   #helps data visualization
```

```{r setup, include=FALSE,cache = FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## [Business Goal and Objective]{.underline}

Their is a Cyclistic, (a bike-share company) in Chicago. The director of marketing believes the company's future success depends on maximizing the number of annual memberships. Therefore, my team wants to understand how casual riders and annual members use Cyclist bikes differently. From these insights, my team will design a new marketing strategy to convert casual riders into annual members. But first, Cyclistic executives must approve my recommendations, so they must be backed up with compelling data insights and professional data visualizations

-\> *In this step, I asked myself questions such as 'How do annual members and casual riders use Cyclistic bikes differently?' to guide my analysis. As a junior data analyst working at Cyclic, my task is to help the marketing team analyze the differences between Casual riders and Members with the goal of providing recommendations that will help convert Casual riders into annual Members to maximize profit.*

## \# STEP 1. [COLLECT DATA]{.underline}

I downloaded the data sets for last 12 Months (August 2020 to Sep 2021) that is used for this case study from [here](https://divvy-tripdata.s3.amazonaws.com/index.html) and stored it in Local System. It is a public data set provided by Motivate International Inc. I have loaded all 12 months csv files in one single data frame using readr library. Some initial records are shown below.

```{r, echo=FALSE,include=FALSE}
#===================== upload Cyclist datasets (csv files)
list_of_files <- list.files(path = "C:/Users/naisteam/Documents/Case Study 1/data",
                            recursive = TRUE,
                            pattern = "\\.csv$",
                            full.names = TRUE)
df <- as.data.frame(readr::read_csv(list_of_files))
head(df)

```

## ##STEP 2. [Analyze Data]{.underline}

List of all columns with their data structure and sample values are given below.

```{r}
glimpse(df)
```

```{r}
ncol(df)
```

Some other parameters of cyclist data sets are given below:\
\* Number of Observations: `r nrow(df)`\
\* Number of Features: `r ncol(df)`

## STEP 3: [CLEAN UP AND ADD DATA TO PREPARE FOR ANALYSIS]{.underline}

### converting Member/Csusal and Rideble Type to factor fields

Excel data and sql operations was used to help me summarize and then I moved to RStudio to create data frames and also converted data frame character to factors and visualize data with ggplot2. I calculated and summarized the data using functions such as mean, median, max, and min in R

```{r,include=FALSE,echo=FALSE}
#======================================================
# Convert rideable_type from charcater to factors
df$rideable_type <- as.factor(df$rideable_type)
df$member_casual <- as.factor(df$member_casual)

```

### [Creating a new clean data frame with additonal fields]{.underline}

Below list of additional columns has been created for analyzing the cyclist data\
1. start_date : Date of Cyclist started DateTime\
2. start_year: Year of Cyclist started DateTime\
3. start_month_name: Month Name of Cyclist started DateTime\
4. start_quarter_name: Quarter Name of Cyclist started DateTime\
5. start_day_of_week: Day of Week of Cyclist started DateTime\
6. ride_length_min: Calculated the ride length in minute of casual_member cyclist data summary

```{r,include=FALSE,echo=FALSE}
clean_df <- df 

clean_df$start_date <- as.Date(clean_df$started_at)
clean_df$start_year <- format(as.Date(clean_df$started_at),"%Y")
clean_df$Start_month_name <- format(as.Date(clean_df$started_at),"%B")
clean_df$start_quarter_name <- quarters(as.Date(clean_df$started_at))
clean_df$start_day_of_week <- format(as.Date(clean_df$started_at),"%A")
clean_df$ride_length_min <- as.double(difftime(clean_df$ended_at, clean_df$started_at, units = "mins"))
head(clean_df)
```

## STEP 4: [CONDUCT DESCRIPTIVE ANALYSIS]{.underline}

#=====================================

### [Analyzing Average Ride Length for Day of Week across Memmber/Causal]{.underline}

```{r, echo=FALSE,include=FALSE}
by_day_of_week <- clean_df %>% group_by(start_day_of_week ,member_casual) %>% summarize (avg_ride_length =  mean(ride_length_min),total_rides = n())
```

```{r}
#plotting data by week day for Avg ride length
p <- ggplot(by_day_of_week, aes(fill=member_casual, y=avg_ride_length, x=start_day_of_week)) + 
  geom_bar(position="dodge", stat="identity")

# Change the order of legend items
p + scale_x_discrete(limits=c("Monday", "Tuesday", "Wednesday","Thursday","Friday","Saturday","Sunday")) + scale_fill_discrete(name = "Member/Casual", labels = c("Casual", "Member")) + labs(x = 'Day of Week', y = 'Average Ride Lenghth', title="Cyclist Data : Casual vs.Member",subtitle="Start day of week")

```

It has been observed that Average Ride Length of Casual Users are much higher than annual members.

### Analyzing Total rides for Member/Causal

```{r}
#plotting data by week day for Total rides
p <- ggplot(by_day_of_week, aes(fill=member_casual, y=total_rides, x=start_day_of_week)) + 
  geom_bar(position="dodge", stat="identity")

# Change the order of legend items
p + scale_x_discrete(limits=c("Monday", "Tuesday", "Wednesday","Thursday","Friday","Saturday","Sunday")) + scale_fill_discrete(name = "Member/Casual", labels = c("Casual", "Member")) + labs(x = 'Day of Week', y = 'Total Rides', title="Cyclist Data : Casual vs Member",subtitle="Total Rides across Start day of Week")
```

*But we can observed that annual members are riding bikes more than casual members on weekdays.*

```{r, echo=FALSE}
by_date <- clean_df %>% group_by(start_date) %>%
  summarize(avg_ride_length =  mean(ride_length_min),
            total_rides = n(),
            max_ride_length =max(ride_length_min),
            median_ride_length =median(ride_length_min))
```

``` {r`}
#plotting ride by mean median and max
ggplot(by_date, aes(x = start_date, y = avg_ride_length)) +
  geom_line() +
  labs(x = "Start Day", y = "Average Ride Length", title="Trend of Average Ride Length",subtitle="Line Chart")
  
```

*We observed that overall trend of cyclist data for Average Ride Length is going slow from January to April month and more from April to July month*

```{r}
#plotting ride by mean median and max
ggplot(by_date, aes(x = start_date, y = total_rides)) +
  geom_line() +
  labs(x = "Start Day", y = "Total Rides", title="Trend of Total Rides over time",subtitle="Line Chart")

```

*We observed that overall trend of cyclist data for Total Rides also is going slow from January to April month and more from April to July month*

```{r}
by_date_2 <- clean_df %>% group_by(start_date,member_casual) %>%
  summarize(avg_ride_length =  mean(ride_length_min),
            total_rides = n(),
            max_ride_length =max(ride_length_min),
            median_ride_length =median(ride_length_min))


#plotting ride by mean median and max
ggplot(by_date_2, aes(x = start_date, y = total_rides,group=member_casual)) +
  geom_line(aes(color = member_casual), size = 1)

```

*We observed that overall trend of cyclist data for Total Rides for both casual/annual members is going slow from January to April month and more from April to July month*

## Conclusion

*`**Concluded that by above and below plots that the total rides of member is more than casual but ride_length of casual is more than member and also casual ride cycle on weekdays more and also in summer so we can provide some marketing campaign and also give discounts to casual member on those days for converting casual to annual member for maximizing the annual profit of Chicago company.**`*

